(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{6357:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(95155),r=a(12115),l=a(74264);function i(e){let{isOpen:t,onClose:a,onSave:i,initialData:n}=e,[o,c]=(0,r.useState)((null==n?void 0:n.nome)||""),[d,x]=(0,r.useState)((null==n?void 0:n.tipo)||"SAIDA");return(0,r.useEffect)(()=>{t&&(c((null==n?void 0:n.nome)||""),x((null==n?void 0:n.tipo)||"SAIDA"))},[t,n]),(0,s.jsx)(l.A,{isOpen:t,onClose:a,title:n?"Editar Categoria":"Nova Categoria",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(i({nome:o.trim(),tipo:d}),c(""),x("SAIDA"),a())},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Categoria"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Ex: Alimenta\xe7\xe3o, Sal\xe1rio...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,s.jsxs)("select",{value:d,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"SAIDA",children:"Sa\xedda (Gasto)"}),(0,s.jsx)("option",{value:"ENTRADA",children:"Entrada (Receita)"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Salvar"})]})]})})}},23110:(e,t,a)=>{Promise.resolve().then(a.bind(a,80128))},53635:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(95155),r=a(36489),l=a(20063),i=a(12115),n=a(15239);function o(){var e,t;let{data:a,status:o}=(0,r.useSession)(),c=(0,l.useRouter)(),[d,x]=(0,i.useState)(!1),m=()=>{(0,r.signOut)({callbackUrl:"/"})},h=()=>{x(!1)},u=[{label:"Dashboard",path:"/dashboard"},{label:"Transa\xe7\xf5es",path:"/transacoes"},{label:"Categorias",path:"/categorias"},{label:"Contas Recorrentes",path:"/contas-recorrentes"},{label:"Configura\xe7\xf5es",path:"/configuracoes"}];return(0,s.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(n.default,{src:"/images/jsl-financas.svg",alt:"JSL Finan\xe7as",width:363,height:68,className:"h-8 sm:h-10 w-auto"})}),"loading"===o?(0,s.jsx)("div",{className:"hidden md:flex items-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Carregando..."})}):a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:["Ol\xe1, ",null==(e=a.user)?void 0:e.email]}),u.map(e=>(0,s.jsx)("button",{onClick:()=>c.push(e.path),className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:e.label},e.path)),(0,s.jsx)("button",{onClick:m,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Sair"})]}),(0,s.jsx)("div",{className:"md:hidden flex items-center",children:(0,s.jsx)("button",{onClick:()=>{x(!d)},className:"text-gray-700 hover:text-gray-900 focus:outline-none focus:text-gray-900","aria-label":"Menu",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}):(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:(0,s.jsx)("button",{onClick:()=>c.push("/login"),className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Entrar"})})]}),d&&a&&(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-50 border-t",children:[(0,s.jsxs)("div",{className:"px-3 py-2 text-sm text-gray-700 border-b",children:["Ol\xe1, ",null==(t=a.user)?void 0:t.email]}),u.map(e=>(0,s.jsx)("button",{onClick:()=>{c.push(e.path),h()},className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:e.label},e.path)),(0,s.jsx)("button",{onClick:()=>{m(),h()},className:"block w-full text-left px-3 py-2 text-base font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Sair"})]})})]})})}},63080:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(12115);function r(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null),n=async()=>{try{r(!0),i(null);let e=await fetch("/api/categorias");if(!e.ok)throw Error("Erro ao buscar categorias");let a=await e.json();t(a)}catch(e){i(e instanceof Error?e.message:"Erro desconhecido")}finally{r(!1)}},o=async e=>{try{let a=await fetch("/api/categorias",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Erro ao criar categoria")}let s=await a.json();return t(e=>[...e,s]),s}catch(e){throw i(e instanceof Error?e.message:"Erro desconhecido"),e}},c=async(e,a)=>{try{let s=await fetch("/api/categorias/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json();throw Error(e.error||"Erro ao atualizar categoria")}let r=await s.json();return t(t=>t.map(t=>t.id===e?r:t)),r}catch(e){throw i(e instanceof Error?e.message:"Erro desconhecido"),e}},d=async e=>{try{let a=await fetch("/api/categorias/".concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Erro ao deletar categoria")}t(t=>t.filter(t=>t.id!==e))}catch(e){throw i(e instanceof Error?e.message:"Erro desconhecido"),e}};return(0,s.useEffect)(()=>{n()},[]),{categorias:e,loading:a,error:l,createCategoria:o,updateCategoria:c,deleteCategoria:d,refetch:n}}},74264:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155);function r(e){let{isOpen:t,onClose:a,title:r,children:l}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:r}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),l]})}):null}},80128:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(95155),r=a(12115),l=a(36489),i=a(20063),n=a(53635),o=a(6357),c=a(63080);function d(){let{data:e,status:t}=(0,l.useSession)(),a=(0,i.useRouter)(),[d,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),{categorias:u,loading:g,error:p,createCategoria:f,updateCategoria:b,deleteCategoria:j}=(0,c.A)();if("loading"===t||g)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{children:"Carregando..."})})})]});if("unauthenticated"===t)return a.push("/login"),null;let v=async e=>{try{m?(await b(m.id,e),h(null)):await f(e)}catch(e){console.error("Erro ao salvar categoria:",e),alert("Erro ao salvar categoria. Tente novamente.")}},y=async e=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{await j(e)}catch(e){console.error("Erro ao deletar categoria:",e),alert("Erro ao deletar categoria. Tente novamente.")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"py-4 sm:py-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Categorias"}),(0,s.jsx)("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium w-full sm:w-auto",children:"Nova Categoria"})]}),p&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:u.map(e=>(0,s.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-4 sm:p-5",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center ".concat("ENTRADA"===e.tipo?"bg-green-100":"bg-red-100"),children:(0,s.jsx)("span",{className:"text-xs sm:text-sm font-bold ".concat("ENTRADA"===e.tipo?"text-green-600":"text-red-600"),children:"ENTRADA"===e.tipo?"+":"-"})})}),(0,s.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nome}),(0,s.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:"ENTRADA"===e.tipo?"Entrada":"Sa\xedda"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{h(e),x(!0)},className:"text-blue-400 hover:text-blue-600 text-sm",children:"✏️"}),(0,s.jsx)("button",{onClick:()=>y(e.id),className:"text-red-400 hover:text-red-600 text-sm",children:"✕"})]})]})})},e.id))}),0===u.length&&!g&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"Nenhuma categoria encontrada"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Crie sua primeira categoria para come\xe7ar"})]})]})}),(0,s.jsx)(o.A,{isOpen:d,onClose:()=>{x(!1),h(null)},onSave:v,initialData:m})]})}}},e=>{e.O(0,[489,394,441,255,358],()=>e(e.s=23110)),_N_E=e.O()}]);
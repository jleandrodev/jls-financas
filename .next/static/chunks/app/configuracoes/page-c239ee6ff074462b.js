(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{31566:(e,a,t)=>{Promise.resolve().then(t.bind(t,76125))},74264:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(95155);function r(e){let{isOpen:a,onClose:t,title:r,children:l}=e;return a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:r}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),l]})}):null}},76125:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(95155),r=t(12115),l=t(74264);function i(e){let{isOpen:a,onClose:t,mode:i,usuario:n,onSave:c}=e,[d,o]=(0,r.useState)({email:"",name:"",password:""}),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{"edit"===i&&n?o({email:n.email,name:n.name,password:""}):o({email:"",name:"",password:""}),h(null)},[i,n,a]);let p=async e=>{e.preventDefault(),x(!0),h(null);try{"create"===i?await c({email:d.email,name:d.name,password:d.password}):await c({email:d.email,name:d.name,...d.password&&{password:d.password}}),t()}catch(e){h(e instanceof Error?e.message:"Erro desconhecido")}finally{x(!1)}},g=e=>{o({...d,[e.target.name]:e.target.value})},y=d.email.trim()&&d.name.trim()&&("edit"===i||d.password.trim());return(0,s.jsx)(l.A,{isOpen:a,onClose:t,title:"create"===i?"Novo Usu\xe1rio":"Editar Usu\xe1rio",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:d.email,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"create"===i?"Senha *":"Nova Senha (opcional)"}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",value:d.password,onChange:g,required:"create"===i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"create"===i?"Senha":"Deixe em branco para manter a senha atual"})]}),u&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",disabled:!y||m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-md",children:m?"Salvando...":"create"===i?"Criar":"Salvar"})]})]})})})}function n(){let{usuarios:e,loading:a,error:t,createUsuario:l,updateUsuario:n,deleteUsuario:c}=function(){let[e,a]=(0,r.useState)([]),[t,s]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null),n=async()=>{try{s(!0),i(null);let e=await fetch("/api/usuarios");if(!e.ok)throw Error("Erro ao carregar usu\xe1rios");let t=await e.json();a(t)}catch(e){i(e instanceof Error?e.message:"Erro desconhecido")}finally{s(!1)}},c=async e=>{try{let a=await fetch("/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Erro ao criar usu\xe1rio")}let t=await a.json();return await n(),t}catch(e){throw e}},d=async(e,a)=>{try{let t=await fetch("/api/usuarios/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.json();throw Error(e.error||"Erro ao atualizar usu\xe1rio")}let s=await t.json();return await n(),s}catch(e){throw e}},o=async e=>{try{let a=await fetch("/api/usuarios/".concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Erro ao excluir usu\xe1rio")}let t=await a.json();return await n(),t}catch(e){throw e}};return(0,r.useEffect)(()=>{n()},[]),{usuarios:e,loading:t,error:l,createUsuario:c,updateUsuario:d,deleteUsuario:o,refetch:n}}(),[d,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)("create"),[u,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),y=async e=>{if(window.confirm("Tem certeza que deseja excluir este usu\xe1rio?"))try{await c(e)}catch(e){alert("Erro ao excluir usu\xe1rio: "+e.message)}},f=async e=>{try{"create"===m?await l(e):u&&await n(u.id,e)}catch(e){throw e}},w=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return a?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("div",{className:"text-lg text-gray-600",children:"Carregando usu\xe1rios..."})})})}):t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"text-lg text-red-600",children:["Erro: ",t]})})})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-8",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Configura\xe7\xf5es"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Gerencie usu\xe1rios e configura\xe7\xf5es do sistema"})]}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg",children:[(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Gerenciamento de Usu\xe1rios"}),(0,s.jsx)("button",{onClick:()=>{x("create"),h(null),o(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium w-full sm:w-auto",children:"Novo Usu\xe1rio"})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),(0,s.jsx)("th",{className:"hidden sm:table-cell px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,s.jsx)("th",{className:"hidden lg:table-cell px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),(0,s.jsx)("th",{className:"hidden lg:table-cell px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xdaltimo Acesso"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"sm:hidden text-xs text-gray-500",children:e.email})]}),(0,s.jsx)("td",{className:"hidden sm:table-cell px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,s.jsx)("td",{className:"hidden lg:table-cell px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:w(e.createdAt)})}),(0,s.jsx)("td",{className:"hidden lg:table-cell px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.lastSignIn?w(e.lastSignIn):"Nunca"})}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.emailConfirmed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.emailConfirmed?"Confirmado":"Pendente"})}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{x("edit"),h(e),o(!0)},className:"text-blue-600 hover:text-blue-900 text-xs sm:text-sm",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-900 text-xs sm:text-sm",children:"Excluir"})]})})]},e.id))})]})}),0===e.length&&(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Nenhum usu\xe1rio encontrado"})})]})]}),(0,s.jsx)(i,{isOpen:d,onClose:()=>o(!1),mode:m,usuario:u||void 0,onSave:f})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=31566)),_N_E=e.O()}]);